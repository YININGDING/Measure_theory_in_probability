\newpage
\section{Product measure}
Let $(\Omega_1, \F_1)$ and $(\Omega_2, \F_2)$ be measurable spaces, and let $\Omega:= \Omega_1 \times \Omega_2$ be their Cartesian product $(\Omega = \{(\omega_1, \omega_2)|\omega_i \in \Omega_i\})$ Let $\tau:= \{A_1 \times A_2 | A_i\in \F_i\}$.The $\tau$ is a $\pi$-system (intersection of rectangle is again rectangle) and we define:
\begin{equation*}
    \F := \sigma(\tau)
\end{equation*}$\F$ is called the product $\sigma$-algebra, and denoted $\F_1 \times \F_2$
\begin{rem}
$\F_1 \times \F_2$ is \textcolor{red}{Not} Cartesian product.
\end{rem}
Actually, $\tau$ is the Cartesian product.
\begin{ex}
Show the following results.
\begin{enumerate}
    \item Verify $\tau$ is a $\pi$-system
    \item Define $\rho_i : \Omega \mapsto \Omega_i$ as $\rho_i(\omega_1, \omega_2) = \omega_i$ The i-th coordinate map, Show that $\rho_i$ is $\F$ measurable.
    \item Show that $\F = \sigma(\rho_1,\rho_2)$ or equivalently $\F = \sigma(\{B_1\times \Omega_2, \Omega_1\times B_2|B_i \in \F_i \})$
\end{enumerate}
\end{ex}
\begin{rem}
\textbf{Both ways to define $\F$ work for a countable product of measurable spaces.}
\end{rem}This is important for stochastic process $X$ indexed by time. \\[0.5cm]
\textbf{Main issue} If $f: (\Omega, \F) \mapsto (\bar{\R}, \bar{\B})$ measurable, does it imply that 
\begin{align*}
    \forall \omega_1 \in \Omega_1, f(\omega_1, \cdot): (\Omega_2, \F_2) \mapsto (\bar{\R}, \bar{\B}) \\
    \forall \omega_2 \in \Omega_2, f(\cdot,\omega_2): (\Omega_1, \F_1) \mapsto (\bar{\R}, \bar{\B})
\end{align*} are measurable ? \textcolor{red}{Yes}

\begin{thm}[The Monotone Class Theorem]
\label{Monotonclass} Let $\M$(monotone class) be a class of bounded (not necessarily measurable) functions $\Omega \mapsto \R$ s.t. 
\begin{enumerate}
    \item $\M$ is a vector space over $\R$
    \item $\I_\Omega \in \M$
    \item If $(f_n) \in \M$ satisfy: $0\leq f_n\leq c <\infty$ and $f_n \uparrow$, then we have$\biglim{n\rightarrow\infty}f_n \in \M$
\end{enumerate}
If $\setp \subset \Omega$ is a $\pi$-system, and $\forall A \in \setp: \I_A \in \M$ then $\M$ contains every bounded $\sigma(\setp)$ measurable function
\end{thm}
\newpage
\pf Let $\setl :=\{A\subset\Omega| \I_A \in \M\}$
\begin{enumerate}
    \item $\I_\Omega \in \M \implies \Omega \in \setl$
    \item If $A,B \in \setl, A\subset B$ we have $\I_A, \I_B \in \M$ also $\I_{B\setminus A} = \I_B - \I_A \in \M$ since $\M$ is a vector space, Hence $\I_{B\setminus A}\in \M \implies B\setminus A \in \setl$
    \item Let $A_n\in \setl$ and $A_n \uparrow A$, Obviously $\I_{A_n} \leq 1< \infty$ and $\I_{A_n} \uparrow$ then we have \begin{equation*}
        \biglim{n\rightarrow\infty}\I_{A_n} = \I_{\biglim{n\rightarrow\infty}A_n} \in \M \implies A\in \setl
    \end{equation*}
\end{enumerate}Hence, $\setl$ is a $\lambda$-system. Since $\setp \subset \setl$ By Dynkin's theorem \ref{Dynkin} $\sigma(\setp) \subset \setl$ \\
But $\M$ is a vector space $\implies $ any bounded simple functions over  $\sigma(\setp)$ is in $\M$.\\
For any $f$ which is $\sigma(\setp)$ measurable and bounded, $\exists M < \infty, 0 \leq f \leq M < \infty$ and non-negative, Define
\begin{equation*}
    f_n := \bigs{k=1}^{n 2^n} \frac{k-1}{2^n} \I_{\{\frac{k-1}{2^n} \leq f \leq \frac{k}{2^n}\}} + n \I_{\{f\geq n\}}
\end{equation*}$f_n \in \M$ as it is a simple bounded $\sigma(\setp)$-measurable function, also $0\leq f_n \leq M$ and $f_n \uparrow f$, so $f \in \M$ by property 3 of $\M$ \\
Finally, any $\sigma(\setp)$-measurable function with $\abs{f}\leq M < \infty$ can be written as $f = f^+ - f^-$ and $f^+, f^- \in \M$ since they are measurable, bounded, non-negative. Again, $f = f^+ - f^-$ since $\M$ is a vector space.
\begin{rem}[Boundness of $f\in \M$] This makes the proof less technical, but this is not necessary.
\end{rem}
\begin{prop}\label{mesurability}
Let $f:(\Omega, \F) \mapsto (\bar{\R}, \bar{\B})$ be measurable, then 
\begin{align*}
 (*)\begin{cases}
   \forall \omega_1 \in \Omega_1, f(\omega_1, \cdot): (\Omega_2, \F_2) \mapsto (\bar{\R}, \bar{\B}) \\
    \forall \omega_2 \in \Omega_2, f(\cdot,\omega_2): (\Omega_1, \F_1) \mapsto (\bar{\R}, \bar{\B})
\end{cases}
\end{align*} are measurable
\end{prop}
\pf Let $\M :=\{ f:\Omega\mapsto\R, \text{f is bounded and (*) holds}\}$Then \begin{enumerate}
    \item $\M$ is a vector space over $\R$ \\
    If $f,g\in \M, a,b\in \R$ then $af+bg \in \M$ since linear combinations of bounded function is bounded same for measurability.
    \item $\I_\Omega \in \M$ obviously.
    \item If $(f_n) \in \M$ satisfy $ 0<(f_n)\leq c < \infty$ and $f_n \uparrow$, then $\biglim{n} f_n \in \M$ (limit exist because bounded convergent sequence, and limit of measurable functions are measurable)
\end{enumerate}Denote $\tau:= \{A_1 \times A_2 | A_i\in \F_i\}$, $\I_A \in \M$ since $\forall A\in \tau, \I_A{(\omega_1, \omega_2)} = \I_{A_1}(\omega_1)\cdot \I_{A_2}(\omega_2)$ which is clearly bounded, and if we restrict one coordinate, it it either 0 or indicator function of the other coordinate which is measurable.\\
Plus $\tau$ is a $\pi$-system shown is the previous exercise, therefore by Monotone Class theorem \ref{Monotonclass}:
\begin{equation*}
    \{\text{all bounded $\F$-measurable functions} \subset \M\}
\end{equation*}Note $\sigma(\tau) = \F$ 
\newpage
\textbf{Recall:}
\begin{thm}[Fubini–Tonelli theorem for Riemann integral]
If $f:\R^2 \mapsto\R^+$ is continuous, then with $I = [a,b], J = [c,d]$ where $a<b, c<d$ 
\begin{equation*}
    \iint_{I\times J} f(x,y) \diff x\diff y = \int_I \int_J f(x,y) \diff y\diff x = \int_J \int_I f(x,y) \diff x\diff y
\end{equation*}\rightline{LHS: double integral, RHS: iterated integral.} \\
The same holds for $f:\R^2 \mapsto\R$ continuous provided
\begin{equation*}
    \iint \abs{f} \diff x\diff y < \infty
\end{equation*}
\end{thm}
We have analogous result in the product space for Lebesgue's integral, but we need to define the analogue of double integral (Measure on the product space).\\
For Riemann integral, the double integral is defined in terms of Riemann sums w.r.t a 2-d lattice of rectangles. The contribution of each rectangle is 
\begin{equation*}
    f(x_i, y_i)\abs{R_{ij}} \qquad (x_i, y_i)\in R_{ij}, \quad \abs{R_{ij}}=\text{Area of }R_{ij}
\end{equation*}
The Lebesgue analogue would be to integrate on $\Omega_1\times \Omega_2$ with the "product measure" 
\begin{equation*}
    \mu(A_1 \cdot A_2) = \mu(A_1) \cdot \mu(A_2) \text{where }A_i\in\F_i
\end{equation*}
\begin{rem}
This definition is defined on the $\pi$-system which is $\tau$, but we have to extend it to the whole product $\sigma$-algebra
\end{rem}
We can define this product measure starting with the "rectangle" $A_1 \cdot A_2$ above then extending it using the Carathéodory's machinery.But since we have no idea what result measure we want, However, Fubini's theorem suggest an alternative approach (easier to calculate the measure of a complicated $A\in \F$) using the iterated integrals.
\newpage
\textbf{Setup:} Assume $\mu_i$ are finite measure no $(\Omega_i, \F_i), i=1,2$. Let $f: (\Omega, \F) \mapsto (\R, \B)$ be bounded and measurable and $\mu_i(\Omega_i) < \infty$
\begin{dfn}
The functions 
\begin{align*}
    I_1(\omega_1, f) := \int_{\Omega_2} f(\omega_1, \omega_2) \diff \mu_2 (\omega_2) \\
    I_2(\omega_2, f) := \int_{\Omega_1} f(\omega_1, \omega_2) \diff \mu_1 (\omega_1)
\end{align*}are well defined from $\Omega_i \mapsto \R$ follow the proposition \ref{mesurability}
\end{dfn}
\begin{lem}If $f:(\Omega, \F) \mapsto (\R, \B)$ is bounded and measurable then 
\begin{align*}
(**)\begin{cases}
    (i)\quad& \text{For } i=1,2: I_i(\cdot, f): (\Omega_i, \F_i) \mapsto (\R, \B) \text{ is bounded and measurable} \\
    (ii)\quad& \text{Fubini:} \int_{\Omega_1} I_1(\cdot, f) \diff \mu_1 = \int_{\Omega_2} I_2(\cdot, f) \diff \mu_2
\end{cases}
\end{align*}
\end{lem}
The proof is basically as  
\begin{enumerate} 
    \item $\M$ is a vector space over $\R$
    \item $\I_\Omega \in \M$ 
    \item If $(f_n)\in \M$ satisfy $0 < f_n \leq c < \infty$ and $f_n \uparrow$ then $\biglim{n} f_n \in \M$
    \item $\M$ contains $\I_A$ for $A = A_1 \times A_2 \in \tau$
\end{enumerate}By monotone class theorem, we have desired result.
\begin{rem}We can extend above result to more general case ($\sigma$-finite)
\begin{enumerate}
    \item By replacing (i) in the above lemma by \\
    (i')$\text{For } i=1,2: I_i(\cdot, f): (\Omega_i, \F_i) \mapsto (\R, \B) \text{ is measurable}$ \\
    The lemma can be extended to $\sigma$-finite measures $\mu_i$ and $f \geq 0$, so (i')(ii) holds
    \item If follows that if $\mu_i$ are $\sigma$-finite and $f$ is measurable, then $I_i(\cdot, f^+)$ and $I_i(\cdot, f^-)$ are measurable and if for $A_i:= \{\omega\in \Omega_i|I_i(\cdot, f^+) = \infty, I_i(\cdot, f^-)=\infty \}, \mu_i(A_i) = 0$ then $I_i(\cdot, f)$ is well defined on $\Omega_i \setminus \A_i$ and $I_i(\cdot, f)\I_{A_i^c}$ is measurable, and on $A_i^c$ we have 
    \begin{equation*}
        I_i(\cdot, f) = I_i(\cdot, f^+) - I_i(\cdot, f^-)
    \end{equation*}
\end{enumerate}
\end{rem}
\newpage
\pf Let $\M$ be the class of bounded measurable functions for (**) holds. $\M$ is a monotone class:
\begin{enumerate} 
    \item $\M$ is a vector space over $\R$ \\
    If $f,g\in \M, a,b\in \R$ 
    \begin{enumerate}
        \item For $i=1,2$ let's say $i=1$(The other is symmetric), $I_1(\omega_1, af+bg) := \int_{\Omega_2} af+bg(\omega_1, \omega_2) \diff \mu_2 (\omega_2) = a\int_{\Omega_2} f(\omega_1, \omega_2) \diff \mu_2 (\omega_2)+b\int_{\Omega_2} g(\omega_1, \omega_2) \diff \mu_2 (\omega_2)$ This is linear combinations of bounded and measurable functions which is again measurable and bounded.
        \item \begin{align*}
            \int_{\Omega_1} I_1(\cdot, af+bg) \diff \mu_1 &= a\int_{\Omega_1} I_1(\cdot, f) \diff \mu_1 + b\int_{\Omega_1} I_1(\cdot, g) \diff \mu_1 \\
            &= a\int_{\Omega_2} I_2(\cdot, f) \diff \mu_2+b\int_{\Omega_2} I_2(\cdot, g) \diff \mu_2 = \int_{\Omega_2} I_2(\cdot, af+bg) \diff \mu_2
        \end{align*}
    \end{enumerate}then we have $af+bg \in \M$ 
    \item $\I_\Omega \in \M$ \\
    $I_1(\omega_1, \I_\Omega) = \int_{\Omega_2} \I_\Omega(\omega_1, \omega_2) \diff \mu_2 (\omega_2) = \mu_2 (\Omega_2) < \infty$ Which is bounded and also measurable, true for $i=1,2$, \\
    $\int_{\Omega_1} I_1(\cdot, f) \diff \mu_1 = \int_{\Omega_1} \mu_2(\Omega_2) \diff \mu_1 =\mu_1{\Omega_1} \mu_2(\Omega_2) =\int_{\Omega_2} I_2(\cdot, f) \diff \mu_2$ also, it is bounded since both measure are finite.
    \item If $(f_n)\in \M$ satisfy $0 < f_n \leq c < \infty$ and $f_n \uparrow$ then $\biglim{n} f_n \in \M$ \\
     (i)$I_1(\omega_1, f) = \int_{\Omega_2} \biglim{n}f_n(\omega_1, \omega_2) \diff \mu_2 \stackrel{\text{MCT}}{=}  \biglim{n}\int_{\Omega_2} f_n(\omega_1, \omega_2) \diff \mu_2 \leq c \mu_2 (\Omega_2) < \infty$ limit of measurable function is measurable, true for $i=1,2$
\begin{align*}
    (ii) \qquad \int_{\Omega_1} I_1(\cdot, f) \diff \mu_1 &= \int_{\Omega_1}\int_{\Omega_2} f(\omega_1, \omega_2)\diff \mu_2 \diff \mu_1 \\
    &\stackrel{\text{MCT}}{=}\int_{\Omega_1}\biglim{n}\int_{\Omega_2} f_n(\omega_1, \omega_2)\diff \mu_2 \diff \mu_1 \stackrel{\text{MCT}}{=}\biglim{n}\int_{\Omega_1}\int_{\Omega_2} f_n(\omega_1, \omega_2)\diff \mu_2 \diff \mu_1 \\
    &\stackrel{\text{Fubini}}{=}\biglim{n}\int_{\Omega_2}\int_{\Omega_1} f_n(\omega_1, \omega_2)\diff \mu_1 \diff \mu_2 \\
    &\stackrel{\text{Reverse MCT}}{=} \int_{\Omega_2} I_2(\cdot, f)\diff \mu_2
\end{align*}
\end{enumerate}
Consider $\tau = \{A_1 \times A_2, A_i\in \F_i\}$ which is a $\pi$-system. 
\begin{enumerate}
    \item[(i)] $I_1(\omega_1, f) = \int_{\Omega_2} \I_A(\omega_1, \omega_2) \diff \mu_2$,Now $\omega_1$ is fixed, the indicator function is either 0 or 1, $\int_{\Omega_2} \I_A(\omega_1, \omega_2) \diff \mu_2 \leq \mu_2 (\Omega_2) < \infty$ which is measurable and bounded, true for $i=1,2$
    \item[(ii)] $\int_{\Omega_1} I_1(\cdot, \I_A) \diff \mu_1 = \int_{\Omega_1}\int_{\Omega_2} \I_A(\omega_1, \omega_2)\diff \mu_2 \diff \mu_1 = \int_{\Omega_2}\int_{\Omega_1} \I_A(\omega_1, \omega_2)\diff \mu_1 \diff \mu_2 = \int_{\Omega_2} I_2(\cdot, \I_A)$ by symmetry. 
\end{enumerate}
$\M$ contains $\I_A$ for $A = A_1 \times A_2 \in \tau$
By Monotone Class theorem \ref{Monotonclass}: Every bounded $\F$-measurable functions is inside $\M$


\newpage
\textbf{product measure} \\
Given $(\Omega_i, \F_i, \mu_i)$ with $\mu_i$ finite measures for $i=1,2$ we define $\mu: \F \mapsto \R^+$ as 
\begin{equation*}
    \bigoplus \quad \mu(A) := \int_{\Omega_1} I_1(\cdot, \I_A) \diff \mu_1 \stackrel{\text{Fubini}}{=} \int_{\Omega_2} I_2(\cdot, \I_A) \diff \mu_2
\end{equation*}
\begin{prop} After we define the product measure
\begin{enumerate}
    \item $\mu$ is a measure on $(\Omega, \F)$ called the product measure
    \item $\mu(A_1 \times A_2) = \mu_1(A_1)\cdot \mu_2(A_2), \forall A_i \in \F_i$
    \item If $\nu$ is another measure on $(\Omega, \F)$ with $\nu(A_1 \cdot A_2) =\mu(A_1 \cdot A_2) = \mu_1(A_1)\cdot \mu_2(A_2), \forall A_i \in \F_i$ then $\mu = \nu$
\end{enumerate}
\end{prop}
\pf Exercise :)

\begin{rem}
The identity $\bigoplus$ as well as the notion of the product measure can be extended to $\sigma$-finite measures
\end{rem}
\begin{cor}[Lebesgue measure on $\R^2$]There exists a unique measure $\lambda_2$ on $(\R^2, \B(\R^2))$ s.t. for any intervals $I_i: (a_i, b_i]$ we have
\begin{equation*}
    \lambda_2(I_1 \times I_2) = \lambda(I_1)\lambda(I_2) = (b_1 - a_1)(b_2 - a_2)
\end{equation*}
\end{cor}

\begin{thm}[Fubini's Theorem]
\label{Fubini}
Let $\mu$ be the product measure on $(\Omega, \F)$ of $(\Omega_i, \F_i, \mu_i)$ with $\mu_i$ are $\sigma$-finite measures for $i=1,2$
\begin{enumerate}
    \item If $f$ is non-negative measurable functions of $(\Omega, \F)$ then 
    \begin{equation*}
        \bigotimes \quad \int f \diff\mu := \int_{\Omega_1} I_1(\cdot, f) \diff \mu_1 = \int_{\Omega_2} I_2(\cdot, f) \diff \mu_2 
    \end{equation*}
    \item $f\in \ls{1}(\Omega)\Longleftrightarrow I_1(\cdot, \abs{f})\in \ls{1}(\Omega_1) \Longleftrightarrow I_2(\cdot, \abs{f})\in \ls{1}(\Omega_2)$ and then $\bigotimes$ holds
\end{enumerate}
\end{thm}
\pf  Exercise, again :)
\begin{rem}
If $(\Omega_i, \F_1, \mu_i), i=1,...,n$ are $\sigma$-finite measure spaces, then we can inductively define $\F = \F_1 \times \F_2 \times ... \times \F_n$ and $\mu =\mu_1 \times \mu_2 \times ... \times \mu_n $ and Fubini tells us that for any measurable function $f\geq 0$ on $(\Omega, \F)$ and any permutation $\pi \in S_n$:
\begin{equation*}
    \int f\diff\mu = \int_{\Omega_{\pi_1}}\int_{\Omega_{\pi_2}} ... \int_{\Omega_{\pi_n}} f \diff\mu_{\pi_n} \diff\mu_{\pi_{n-1}} ... \diff\mu_{\pi_1}
\end{equation*}The same holds for $f\in \ls{1}(\Omega, \F, \mu)$
\end{rem}
\begin{cor}[Lebesgue measure on $\R^n$]$\exists!$ measure $\lambda_n$ on $(\R^n, \B(\R^n)) = (\R^n, \B^n)$ s.t. for any intervals $I_i = [a_i, b_i)$
\begin{equation*}
    \lambda_n (I_1 \times ... \times I_n) = \lambda_1(I_1) ... \lambda_n(I_n)
\end{equation*}
\end{cor}
\newpage
\begin{prop}Suppose $X \geq 0$ RV on $(\Omega, \F, \prob)$ and let $G(x) := \prob(X\geq x)$ 
\begin{equation*}
    \E(X) = \int_{\R^+} G \diff\lambda = \int_0^\infty \prob(X\geq x) \diff x
\end{equation*}
\end{prop}
\pf Consider the measure $\mu = \prob \times \lambda$ on $(\Omega, \F) \times (\R^+, \B^+)$ this is well defined by previous remark. Let $A := \{(\omega, x)| X(\omega) \geq x \geq 0\}$ \\
Let $f := \I_A$ This is a function on $\Omega \times \R^+$\begin{equation*}
    \int f \diff \mu = \int \I_A \diff \mu \stackrel{\text{Fubini}}{=} \int_{\R^+}\into \I_A(\omega,x) \diff\prob(\omega) \diff\lambda(x) = \into\int_{\R^+} \I_A(\omega,x)  \diff\lambda(x)\diff\prob(\omega)
\end{equation*}
Consider the second integral $(\int_{\R^+} \I_A(\omega,x)  \diff\lambda(x))$
\begin{align*}
    &\int_{\R^+} \I_A(\omega,x)  \diff\lambda(x) = \int_{\R^+} \I_{\{x\leq X(\omega)\}}  \diff\lambda(x) = X(\omega) \\
    \implies& \int \I_A \diff \mu =\into\int_{\R^+} \I_A(\omega,x)  \diff\lambda(x)\diff\prob(\omega)= \into X(\omega) \diff\prob(\omega) = \E(X)
\end{align*}
Consider the first integral $\into \I_A(\omega,x) \diff\prob(\omega)$
\begin{align*}
    &\into \I_A(\omega,x) \diff\prob(\omega) = \into \I_{\{\omega|X(\omega) \geq x\}} \diff\prob(\omega) = \prob(X\geq x) \\
    \implies& \int \I_A \diff \mu =\int_{\R^+}\into \I_A(\omega,x) \diff\prob(\omega) \diff\lambda(x) = \int_{\R^+} \prob(X\geq x)\diff\lambda(x) = \int_{\R^+} G \diff\lambda
\end{align*}
Hence $\E(X) = \int_{\R^+} \prob(X\geq x) \diff\lambda$ since $G$ is monotonic decreasing, then it is Riemann integrable 

\newpage
\subsection{Random Vector}
Few remarks on Random Vectors(RV's)
\begin{dfn}
A measurable function$X=(X_1, ..., X_n): (\Omega, \F) \mapsto (\R^n, B^n)$ is called a random vector.
\end{dfn}
\begin{ex}
$X$ is a random vector $\Longleftrightarrow$ $X_i$ is a RV for $i=1,...,n$
\end{ex}
Recall, the probability is induced by RV $X$ on $(\R, \B)$:
\begin{equation*}
    \mu_X(B) := \prob(X\in B), \quad \forall B\in\B
\end{equation*}Similarly, if $\doublebar{X} = (X_1,...,X_n)$ a r.v. then it induces a probability measure on $(\R^n, \B^n)$:
\begin{equation*}
    \mu_{\doublebar{X}} (B) := \prob(\doublebar{X}\in B), \quad \forall B\in\B^n
\end{equation*}
\begin{dfn}[absolutely continuous] $\mu_{\doublebar{X}}$ is absolutely continuous (a.c.) w.r.t $\lambda_n$ if $\exists f: \R^n \mapsto [0, \infty]$ measurable s.t. 
\begin{equation*}
    \mu_{\doublebar{X}} (B) = \int_B f \diff\lambda_n, \qquad \forall B\in \B^n
\end{equation*}and $\mu_{\doublebar{X}}(\R^n)=1$ which makes it probability measure,  $f$ is called the density of $\mu_{\doublebar{X}}$
\end{dfn}
\begin{ex}
\begin{enumerate}
    \item if $\doublebar{X}$ has density $f$ w.r.t $\lambda_n$, then each $X_i$ has density w.r.t $\lambda$ and 
    \begin{equation*}
        f_{X_i} = \int ... \int f(x_1, ..., x_{i-1}, x, ...,x_n) \diff \lambda(x_1) ,...., \diff \lambda(x_{i-1}) ...\diff \lambda(x_n)
    \end{equation*}
    \item If $\mu_{\doublebar{X}}(\R^n)=1$ and $f: \R^n \mapsto [0,\infty]$ measurable s.t. 
    \begin{equation*}
        \forall B\in \tau = \{B_1 \times ... \times B_n|B_i\in \B_i\} \quad \mu_{\doublebar{X}}(B) = \int f \diff\lambda_n
    \end{equation*}Then $\mu_{\doublebar{X}}$ is a.c. w.r.t $\lambda_n$ and $f$ is the density of $\doublebar{X}$
    \item If the RVs $X_1,...,X_n$ are independent and if each $X_i$ has density $f_i$ then $\doublebar{X} = (X_1,...,X_n)$ has density:
    \begin{equation*}
        f(X_1,...,X_n) = \bigp{i=1}^n f_i(x_i)
    \end{equation*}
\end{enumerate}
\end{ex}
\newpage
\subsection{Change of variable}
Using change of Variable theorem \ref{change} we deduce:
Let $\doublebar{X}$ be a random vector from $(\Omega, \F, \prob) \mapsto (\R^n, \B^n)$, Suppose $h:(\R^n, \B^n) \mapsto (\R, \B) $ is measurable, then for $Y = h(\doublebar{X})$ we have 
\begin{enumerate}
    \item $\E(Y) = \int Y \diff \prob$ is defined iff $\int_{\R^n} h \diff\mu_{\doublebar{X}}$ is defined and $\E(Y) = \int_{\R^n} h \diff\mu_{\doublebar{X}}$
    \item $Y = h(\doublebar{X}) \in \ls{1}(\Omega, \F, \prob) \Longleftrightarrow h\in \ls{1}(\R^n, \B^n, \mu_{\doublebar{X}})$ Moreover, if $\doublebar{X}$ has density $f$ then 
    \begin{equation*}
        \E(Y) = \int_{\R^n} hf \diff\lambda_n
    \end{equation*}
\end{enumerate}
\subsection{Strong Law of Large number}
\textbf{we have a SLLN before but that requires fourth moment exist. Now we drop this assumption} \\ 
Let $(X_n)$ be a sequence of i.i.d (pairwise independent suffices) RVs s.t. $\E(\abs{X_i}) < \infty$ then $(X_n)$ satisfies SLLN
\begin{equation*}
    \biglim{n\rightarrow \infty} \frac{S_n}{n} = \E(X_1) \quad a.s.
\end{equation*}where $S_n = \bigs{k=1}^n X_k$ \\
\pf 
\textbf{Sketch of the proof:} Observation: Fix $\epsilon > 0$ Denote by \begin{equation*}
    A_n(\epsilon) := \{\omega|\abs{\frac{Y_1+...+Y_n}{n}} > \epsilon\}
\end{equation*}Assume $\E(Y_i) = 0 \quad \forall i = 1,...,n$ By Chebyshev \ref{Chebyshev} inequality:
\begin{equation*}
    \prob(A_n(\epsilon)) \leq \frac{\bigs{i=1}^n V(Y_i)}{\epsilon^2 n^2}
\end{equation*}If we have $\bigs{n=1}^\infty \frac{\bigs{i=1}^n V(Y_i)}{n^2} < \infty$ then by Borel-Cantelli lemma \ref{BCL1} for a.e. $\omega, \omega \in A_n(\epsilon)$ for finitely many n's. Take $\epsilon_n = \frac{1}{n} \implies$ we showed: \\
\textbf{Claim:} If $(Y_n)$ r.v. with $\E(Y_i) = 0$ and such that $\bigs{n=1}^\infty \frac{\bigs{i=1}^n V(Y_i)}{n^2} < \infty$ then $\frac{S_n^Y}{n} \rightarrow 0 \qquad a.s.$

\begin{thm}[Borel's theorem]
\label{Borel}
For almost every $x\in[0,1]$ w.r.t $\lambda$-Lebesgue measure, the dyadic expansion of $x$, i.e. $(x_1, x_2, ...)$ where
\begin{equation*}
    x = \bigs{j=1}^\infty \frac{x_j}{2^j} \quad x_j \in\{0,1\}
\end{equation*}is \textcolor{red}{normal} i.e. Any $\omega \in \{0,1\}^*$ appears in $x$ with frequency $\frac{1}{2^{\abs{\omega}}} $, where $\abs{\omega} =$ length of $\omega$: 
\begin{equation*}
    freq_\lambda(\omega) = \biglim{N\rightarrow\infty}\frac{1}{N}\bigs{j=1}^N \I_{\{x_j, x_{j+1}, ..., x_{j+\abs{\omega}}=  \omega\}}
\end{equation*}
\end{thm}
\begin{example}
$x = 100101010...$ Then $freq_\lambda(\{10\}) \approx \frac{4}{8}, \quad N = 8$ Let $N\rightarrow \infty$ we have 
\begin{equation*}
    freq_\lambda(\{10\}) = \frac{1}{2^2} = \frac{1}{4}
\end{equation*}
\end{example}

\newpage
Weak convergence of probability measures
\begin{dfn}[Dirac measure]We define this measure as following:
\begin{equation*}
    \delta_0(A) = \begin{cases}
    1, \quad 0\in A \\ 
    0, \quad 0\notin A
    \end{cases}\quad \forall A\in \B(\R)
\end{equation*}

\end{dfn}

\begin{dfn}[Converge weakly/ Converge in distribution]
Let $(\mu_n), \mu$ be probability measures on $(\R, \B)$, we say $\mu_n$ converges weakly to $\mu$, and denoted by $\mu_n \implies\mu$ or $\mu_n \xrightarrow{w}\mu$. If for any $x\in \R$ s.t. $\mu(\{x\}) = 0$ we have 
\begin{equation*}
\mu_n((-\infty,x]) \rightarrow \mu((-\infty,x]) 
\end{equation*}That is $\forall x\in \R $ s.t. F is continuous 
\begin{equation*}
    F_n(x) \xrightarrow{d} F
\end{equation*}
\end{dfn}
\begin{example} 
Consider following $\mu_n$ as empirical distribution.
\begin{enumerate}
    \item $\mu_n$  are discrete probability measures 
    \begin{equation*}
        \mu_n(\{\frac{k}{n}\}) = \frac{1}{n} \quad \text{for } k= 0,1,...,n-1
    \end{equation*}Intuitively, $\mu_n \rightarrow \lambda$ on $[0,1]$
    \item $\mu_n$ is uniform on $(-\frac{1}{n}, \frac{1}{n})$
    \begin{equation*}
        \mu_n \rightarrow \delta_0 \text{ Dirac measure}
    \end{equation*}
    \item $\mu_n$ is uniform on $(-n, n)$ then $ \mu_n \rightarrow 0$
\end{enumerate}
\end{example}
\pf 
\newpage
\begin{dfn}[Weak convergence of RV's] The sequence $X_n$ of RVs converges weakly to $X$, denoted by 
\begin{equation*}
    X_n \xrightarrow{d} X, \text{ or } F_n \xrightarrow{d} F
\end{equation*}
\end{dfn}
\begin{prop}\label{pimplyd}
$X_n \xrightarrow{\prob} X \implies X_n \xrightarrow{d} X$
\end{prop}
\pf Let $\epsilon >0$ fixed, Consider the set $A := \{\omega| \abs{X_n(\omega) - X(\omega) > \epsilon}\}$ \\
Let $x\in \R$ with $F$ (DF of X) being continuous at x
\begin{align*}
    \{\omega| X(\omega) \leq x-\epsilon\} &= A\cap \{\omega| X(\omega) \leq x-\epsilon\} \bigcup A^c \cap \{\omega| X(\omega) \leq x-\epsilon\} \\
    &\subset A \bigcup \{\omega|X_n(\omega) \leq x\} \\
\end{align*} Apply probability measure both sides
\begin{equation*}
    F(x-\epsilon) \leq \prob(A\cup \{\omega|X_n(\omega) \leq x\}) \leq \prob(A)+F_n(x)
\end{equation*} Send $\epsilon$ to 0
\begin{align*}
    &\biglim{\epsilon \rightarrow 0}F(x-\epsilon) =  F(x) \leq \biglim{\epsilon \rightarrow 0}\prob(A) + F_n(x) \\
\end{align*}Similarly we also have $F_n(x) \leq F(x) + \biglim{\epsilon \rightarrow 0}\prob(A)$ Then we have
\begin{equation*}
   F(x) - \biglim{\epsilon \rightarrow 0}\prob(A) \leq F_n(x) \leq F(x) + \biglim{\epsilon \rightarrow 0}\prob(A)
\end{equation*}Now send $n$ to $\infty$ we have desired result:
\begin{equation*}
    \biglim{n \rightarrow \infty} F_n(x) = F(x)
\end{equation*}


\newpage
\begin{thm}[Portmanteau theorem]
\label{Portmanteau}
Let $\mu, \mu_1, \mu_2, ...$ be probability measures on $(\R, \B)$ Then TFAE(the following are equivalent)
\begin{enumerate}
    \item $\mu_n \implies \mu (\mu_n \xrightarrow{d} \mu)$
    \item sequence of measures converge to other measure \begin{equation*}
        \biglim{n}\int f \diff\mu_n = \int f \diff\mu
    \end{equation*} For $f\in C_b(\R)$ (Bounded continuous function takes value in $\R$)
    \item For any closed $F\subset \R$:
    \begin{equation*}
        \lsup{n} \mu_n(F) \leq \mu(F)
    \end{equation*}
    \item For any open $G\subset\R$
    \begin{equation*}
        \mu(G) \leq \linf{n}\mu(G)
    \end{equation*}
\end{enumerate}
\end{thm}
\begin{rem}
A sequence $(\alpha_n) \subset [0,1]$ is called \textbf{equidistributed} if for any continuous function $f$ on $[0,1]$ :
\begin{equation*}
    \frac{1}{N}\bigs{n=1}^N f(\alpha_n) \rightarrow \int_0^1 f \diff x 
\end{equation*} i.e. $\mu_n = \frac{1}{N}\bigs{n=1}^N \delta_{\alpha_n}$ and $(\alpha_n)\subset [0,1]$ equidistributed $\Longleftrightarrow \mu_N\xrightarrow{d}\lambda$ Lebesgue measure on $[0,1]$ This is direct result as (1) is equivalent to (2)
\end{rem}
\newpage
\pf $(ii)\implies (i)$ Assume it is true that $\biglim{n}\int f \diff\mu_n = \int f \diff\mu$ For $f\in C_b(\R)$ For any $\delta >0$, Consider $\phi_{x,\delta},\psi_{x,\delta} \in C_b(\R)$ in following sense
\vspace{2cm} \\
Then \begin{align*}
    &F_n(x) = \mu_n((-\infty, x])  = \int \I_{\{(-\infty, x]\}} \diff\mu_n \leq \int \phi_{x,\delta} \diff\mu_n \xrightarrow{n \rightarrow \infty} \int \phi_{x,\delta} \diff\mu \\
    &\int \phi_{x,\delta} \diff\mu \leq \mu((-\infty, x+\delta]) = F(x+\delta)\\
    \implies& \lsup{n}F_n(x) \leq F(x+\delta)\\
    \intertext{Since $F$ is DF which is right-continuous.}
    &\lsup{n}F_n(x) \leq F(x)
\end{align*} Also consider:
\begin{align*}
    &F_n(x) = \mu_n((-\infty, x])  = \int \I_{\{(-\infty, x]\}} \diff\mu_n \geq \int \psi_{x,\delta} \diff\mu_n \xrightarrow{n \rightarrow \infty} \int \psi_{x,\delta} \diff\mu \\
    &\int \psi_{x,\delta} \diff\mu \geq \mu((-\infty, x-\delta]) = F(x-\delta)\\
    \implies& \linf{n}F_n(x) \geq F(x-\delta)\\
    \intertext{Since we only care about continuity point of $F$}
    &\linf{n}F_n(x) \geq F(x)
\end{align*}Combining these 2 cases we have for any continuity points of $F$
\begin{equation*}
    \lsup{n}F_n(x) \leq F(x) \leq \linf{n}F_n(x) \implies  \biglim{n\rightarrow\infty}F_n(x) = F(x) \implies \mu_n \xrightarrow{d} \mu
\end{equation*}
$(i)\implies (ii)$ Assume we have weak convergence. any sequence of probability measures $(\mu_n)$ there exists a measure $\nu$ on $(\R, \B)$ and sub-sequence $(n_k)$ s.t. for all $f\in C_b(\R)$
\begin{equation*}
    \int f\diff \mu_{n_k} \rightarrow \int f \diff\mu
\end{equation*}Using $(ii)\implies (i)$ For all $x\in \R$ s.t. $\nu(\{x\}) = 0$ we have\begin{equation*}
    \mu_{n_k}((-\infty, x]) \rightarrow \nu((-\infty, x])
\end{equation*}If also $x\in \R$ satisfies that $\mu(\{x\}) = 0$
\begin{equation*}
    \mu_{n_k}((-\infty, x]) \rightarrow \mu((-\infty, x])
\end{equation*}That is, for all x non-atom for both $\mu, \nu$ we have \begin{equation*}
    \nu((-\infty, x]) = \mu((-\infty, x])
\end{equation*}But there are at most countably such atoms. $\forall x\in \R$ Take $x_n \downarrow x^+$ s.t. $x_n$ is not an atom for both $\mu, \nu$
\begin{equation*}
    \nu((-\infty, x_n]) = \mu((-\infty, x_n]) \implies \nu((-\infty, x]) = \mu((-\infty, x])
\end{equation*} By continuity from above of measures. Also we know that $\B$ is equivalent to $\setp = \{(-\infty, x]|x\in \R)\}$ Hence \begin{equation*}
    \mu = \nu
\end{equation*}
But now, for any subsequences we have the same limit, the limit converges, because if not, we will have two subsequences converge to different value, but here we have identical limit for all subsequences, hence the limits converge.
\begin{equation*}
    \forall f\in C_b(\R) \int f \diff\mu_n \rightarrow \int f \diff\mu
\end{equation*}
\qed


